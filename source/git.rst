git 的使用
------------

下载
=====

略

初始化仓库
==========

.. code::

    git init

.gitignore 文件
================

在使用Git的过程中，有的文件比如日志，临时文件，编译的中间文件等不要提交到代码仓库，这时就要设置相应的忽略规则，来忽略这些文件的提交。
.gitignore文件声明哪些文件不希望添加到git中去，这样在 ``git add .`` 的时候这些文件就会被自动忽略掉。

.. admonition:: 注意

    创建.gitignore文件之前push的项目文件不会受到影响，所以务必在提交之前创建好.gitignore文件

语法
````
在 .gitignore 文件中，每一行的忽略规则的语法如下：

1. 空格不匹配任意文件，可作为分隔符，可用反斜杠转义
2. 以 ``#`` 开头的行都会被 Git 忽略。即#开头的文件标识注释，可以使用反斜杠进行转义。
3. 可以使用标准的glob模式匹配。所谓的glob模式是指shell所使用的简化了的正则表达式。
4. 以斜杠 ``/`` 开头表示目录；"/"结束的模式只匹配文件夹以及在该文件夹路径下的内容，但是不匹配该文件；"/"开始的模式匹配项目跟目录；如果一个模式不包含斜杠，则它匹配相对于当前 .gitignore 文件路径的内容，如果该模式不在 .gitignore 文件中，则相对于项目根目录。
5. 以星号 ``*`` 通配多个字符，即匹配多个任意字符；使用两个星号 ``**`` 表示匹配任意中间目录，比如 ``a/**/z`` 可以匹配 ``a/z``, ``a/b/z`` 或 ``a/b/c/z`` 等。
6. 以问号 ``?`` 通配单个字符，即匹配一个任意字符；
7. 以方括号 ``[]``  包含单个字符的匹配列表，即匹配任何一个列在方括号中的字符。比如[abc]表示要么匹配一个a，要么匹配一个b，要么匹配一个c；如果在方括号中使用短划线分隔两个字符，表示所有在这两个字符范围内的都可以匹配。比如[0-9]表示匹配所有0到9的数字，[a-z]表示匹配任意的小写字母）。
8. 以叹号 ``!`` 表示不忽略(跟踪)匹配到的文件或目录，即要忽略指定模式以外的文件或目录，可以在模式前加上惊叹号（!）取反。需要特别注意的是：如果文件的父目录已经被前面的规则排除掉了，那么对这个文件用"!"规则是不起作用的。也就是说"!"开头的模式表示否定，该文件将会再次被包含，如果排除了该文件的父级目录，则使用"!"也不会再次被包含。可以使用反斜杠进行转义。

优先级
``````

在 .gitingore 文件中，每一行指定一个忽略规则，Git检查忽略规则的时候有多个来源，它的优先级如下（由高到低）：

1. 从命令行中读取可用的忽略规则
2. 当前目录定义的规则
3. 父级目录定义的规则，依次递推
4. $GIT_DIR/info/exclude 文件中定义的规则
5. core.excludesfile中定义的全局规则

.. admonition:: 注意

    在同一个.ignore配置文件中，规则是按行从上到下进行匹配的，意味着如果前面的规则匹配的范围更大，后面的规则将不会生效

调试
`````

``git check-ignore`` 命令用来检查 .gitignore 中的错误。

配置文件
========

Windows下，git的全局配置文件在 ``~\.gitconfig`` 文件中

设置用户名和邮件地址
```````````````````````
在首次提交之前，需要设置好用户名和邮件地址。一般来说，设置一个全局的用户名和邮件地址就足够了。我们可以通过以下命令来完成设置
.. code:: 

    git config --global user.name "Your Name"
    git config --global user.email "youremail@yourdomain.com"

有时需要为某一个仓库单独设置用户名和邮件地址，去掉选项中的 ``--global`` 即可
.. code:: 

    git config user.name "Your Name"
    git config user.email "youremail@yourdomain.com"


代理配置
`````````
  .. code:: shell

    git config --global http.proxy "http://127.0.0.1:7890"

    git config --global https.proxy "http://127.0.0.1:7890"

查看配置
`````````
  .. code:: shell

    git config --list


Reference
============
1. https://zhuanlan.zhihu.com/p/120862483
2. https://zhuanlan.zhihu.com/p/52885189
3. https://zhuanlan.zhihu.com/p/121471974